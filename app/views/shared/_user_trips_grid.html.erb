<div class="w-full mt-8">
  <!-- Header with trip count -->
  <div class="flex items-center justify-between mb-6 px-4 md:px-0">
    <h2 class="text-2xl font-bold">
      Trips
      <span class="text-base text-gray-500 ml-2"><%= trips.count %></span>
    </h2>
    <% if user == Current.user %>
      <%= link_to new_trip_path, class: "btn btn-primary btn-sm" do %>
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd" />
        </svg>
        New Trip
      <% end %>
    <% end %>
  </div>

  <% if trips.any? %>
    <!-- Instagram-style grid -->
    <div class="grid grid-cols-3 gap-1 md:gap-4">
      <% trips.each do |trip| %>
        <%= link_to trip, class: "relative aspect-square overflow-hidden bg-gray-200 group cursor-pointer" do %>
          <% if trip.images.attached? %>
            <%= image_tag trip.images.first, class: "w-full h-full object-cover transition-transform duration-200 group-hover:scale-105" %>
          <% else %>
            <!-- Placeholder for trips without images -->
            <div class="w-full h-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-white opacity-50" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" />
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" />
              </svg>
            </div>
          <% end %>

          <!-- Hover overlay with trip info -->
          <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all duration-200 flex items-center justify-center opacity-0 group-hover:opacity-100">
            <div class="text-white text-center px-4">
              <h3 class="font-bold text-sm md:text-lg mb-1 line-clamp-2"><%= trip.title %></h3>
              <% if trip.location.present? %>
                <p class="text-xs md:text-sm flex items-center justify-center">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
                  </svg>
                  <%= trip.location %>
                </p>
              <% end %>
              <% if trip.in_planning %>
                <span class="badge badge-warning badge-sm mt-2">Planning</span>
              <% end %>
            </div>
          </div>

          <!-- Multiple images indicator -->
          <% if trip.images.count > 1 %>
            <div class="absolute top-2 right-2 bg-black bg-opacity-60 rounded-full p-1">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-white" viewBox="0 0 20 20" fill="currentColor">
                <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z" />
              </svg>
            </div>
          <% end %>
        <% end %>
      <% end %>
    </div>
  <% else %>
    <!-- Empty state -->
    <div class="text-center py-16 bg-base-200 rounded-lg">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto text-gray-400 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" />
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" />
      </svg>
      <p class="text-gray-500 text-lg mb-4">No trips yet</p>
      <% if user == Current.user %>
        <%= link_to "Create your first trip", new_trip_path, class: "btn btn-primary" %>
      <% end %>
    </div>
  <% end %>
</div>